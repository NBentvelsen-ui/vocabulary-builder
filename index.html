<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vocabulary Builder</title>

    <!-- React + ReactDOM (CDN) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide icons (CDN, werkt zonder import!) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Excel export library -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50">

    <div id="root"></div>

    <script type="text/babel">

        function VocabularyBuilder() {
            const { useState, useEffect } = React;

            const [words, setWords] = useState([]);
            const [loading, setLoading] = useState(true);
            const [search, setSearch] = useState("");
            const [category, setCategory] = useState("All");

            const [showForm, setShowForm] = useState(false);
            const [form, setForm] = useState({
                word: "",
                meaning: "",
                sentence: "",
                synonyms: "",
                category: ""
            });

            // ---------------------------
            // Load from localStorage
            // ---------------------------
            useEffect(() => {
                const stored = JSON.parse(localStorage.getItem("vocabWords") || "[]");
                if (stored.length > 0) {
                    setWords(stored);
                } else {
                    const example = [{
                        id: Date.now(),
                        word: "Ephemeral",
                        meaning: "Lasting for a very short time",
                        sentence: "The beauty of cherry blossoms is ephemeral.",
                        synonyms: "fleeting, transient",
                        category: "Adjectives"
                    }];
                    setWords(example);
                    localStorage.setItem("vocabWords", JSON.stringify(example));
                }
                setLoading(false);
            }, []);

            // ---------------------------
            // Save to localStorage
            // ---------------------------
            const saveWords = (newList) => {
                setWords(newList);
                localStorage.setItem("vocabWords", JSON.stringify(newList));
            };

            // ---------------------------
            // Add word
            // ---------------------------
            const handleSubmit = (e) => {
                e.preventDefault();
                if (!form.word || !form.meaning) return;

                const newWord = { ...form, id: Date.now() };
                const updated = [...words, newWord];
                saveWords(updated);

                setForm({ word: "", meaning: "", sentence: "", synonyms: "", category: "" });
                setShowForm(false);
            };

            // ---------------------------
            // Delete
            // ---------------------------
            const removeWord = (id) => {
                const updated = words.filter(w => w.id !== id);
                saveWords(updated);
            };

            // ---------------------------
            // Excel Export
            // ---------------------------
            const exportToExcel = () => {
                if (!words.length) return alert("No words to export!");

                const data = words.map(w => ({
                    Word: w.word,
                    Meaning: w.meaning,
                    Sentence: w.sentence || "",
                    Synonyms: w.synonyms || "",
                    Category: w.category || ""
                }));

                const sheet = XLSX.utils.json_to_sheet(data);
                const book = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(book, sheet, "Vocabulary");

                XLSX.writeFile(book, "vocabulary.xlsx");
            };

            // ---------------------------
            // Filters
            // ---------------------------
            const categories = ["All", ...new Set(words.map(w => w.category).filter(Boolean))];
            const filtered = words.filter(w => {
                const matchCat = category === "All" || w.category === category;
                const matchText =
                    w.word.toLowerCase().includes(search.toLowerCase()) ||
                    w.meaning.toLowerCase().includes(search.toLowerCase());
                return matchCat && matchText;
            });

            // ---------------------------
            // Loading screen
            // ---------------------------
            if (loading) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <div className="animate-spin w-12 h-12 text-indigo-600">
                            <i data-lucide="loader"></i>
                        </div>
                    </div>
                );
            }

            // ---------------------------
            // MAIN UI
            // ---------------------------
            return (
                <div className="min-h-screen p-6 pb-40">
                    <div className="max-w-4xl mx-auto">

                        <h1 className="text-4xl font-bold text-center text-indigo-700 mb-4 flex items-center justify-center gap-2">
                            <i data-lucide="book-open" class="w-9 h-9"></i>
                            Vocabulary Builder
                        </h1>

                        <p className="text-center text-gray-600 mb-6">Grow your vocabulary daily</p>

                        {/* Category Buttons */}
                        <div className="flex flex-wrap gap-
